<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ | ShopElectro</title>
  <style>
    :root{
      --bg:#121212;
      --panel:#1e1e1e;
      --muted:#2a2a2a;
      --accent:#ff6600;
      --text:#e6e6e6;
      --mutedText:#bfbfbf;
      --radius:12px;
      --btn-h:44px;
    }
    body.light{
      --bg:#f6f6f6; --panel:#ffffff; --muted:#efefef; --text:#111111; --mutedText:#6b6b6b;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background-color:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      transition:background .22s,color .22s;
    }
    .header{
      position:sticky; top:0; z-index:60;
      display:flex; align-items:center; gap:12px;
      padding:12px 22px; background:var(--panel);
      box-shadow:0 1px 0 rgba(0,0,0,0.35);
    }
    .header-left{display:flex;align-items:center;gap:12px}
    .home-icon{display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:10px;font-size:20px;text-decoration:none}
    .logo{font-weight:bold;font-size:1.05rem}
    .search{flex:1;max-width:720px;display:flex;gap:8px;align-items:center}
    .search input{width:100%;padding:10px;border-radius:8px;border:none;background:var(--muted);color:var(--text)}
    .search button{height:40px;padding:8px 10px;border-radius:8px;border:none;background:var(--muted);color:var(--text);cursor:pointer}
    .nav{display:flex;gap:10px}
    .nav a{ text-decoration:none }
    .nav button{ background:var(--muted); border:none; color:var(--text); padding:10px 20px; border-radius:8px; cursor:pointer }
    .nav button.active{ background:var(--accent); color:#111 }
    #themeToggle{width:42px;height:42px;border-radius:10px;border:none;background:var(--muted);color:var(--text);cursor:pointer}
    .hamburger{display:none;width:42px;height:42px;border-radius:10px;border:none;background:var(--muted);color:var(--text);cursor:pointer}
    main{display:flex;padding:30px 40px;gap:30px}
    .filters{width:260px;background-color:var(--panel);border-radius:12px;padding:20px;height:fit-content}
    .filters h3{margin-top:0;color:var(--text)}
    .filter-group{margin-bottom:20px}
    .filter-group label{display:block;margin:8px 0;cursor:pointer;color:var(--mutedText)}
    select, input[type="range"]{width:100%;border-radius:8px;border:none;padding:8px;background-color:var(--muted);color:var(--text)}
    .filter-group input[type="checkbox"], .filter-group input[type="radio"]{accent-color:var(--accent);margin-right:8px}
    .price-value{font-size:0.9rem;margin-top:5px}
    .filter-buttons{display:flex;justify-content:space-between}
    .btn{border:none;border-radius:8px;padding:10px 15px;cursor:pointer;font-weight:bold}
    .btn-apply{background-color:var(--accent);color:#111}
    .btn-reset{background-color:var(--muted);color:var(--text)}
    .catalog{flex:1;display:grid;grid-template-columns:repeat(3,1fr);gap:20px}
    .product-card{background-color:var(--panel);border-radius:12px;padding:20px;transition:transform .3s,box-shadow .3s;display:flex;flex-direction:column;justify-content:space-between}
    .product-card:hover{transform:translateY(-5px);box-shadow:0 0 10px rgba(255,102,0,0.08)}
    .product-card img{width:100%;height:180px;object-fit:cover;border-radius:8px;margin-bottom:10px}
    .product-meta{display:flex;justify-content:space-between;align-items:center;margin-top:6px;color:var(--mutedText);font-size:0.9rem}
    .brand{background:rgba(255,255,255,0.04);padding:4px 8px;border-radius:8px}
    .rating{display:flex;gap:4px;align-items:center}
    .stars{letter-spacing:1px}
    .price{color:var(--accent);font-weight:bold;margin:8px 0}
    .buttons{display:flex;gap:10px;margin-top:12px}
    .buy-btn, .cart-btn, .details-btn{flex:1;border:none;border-radius:8px;padding:10px;cursor:pointer;font-weight:bold;min-width:0}
    .details-btn{background:#444;color:white}
    .buy-btn{background:var(--accent);color:#111}
    .cart-btn{background:var(--muted);color:var(--text)}
    .pagination{grid-column:1 / -1;display:flex;justify-content:center;margin-top:20px;gap:8px;align-items:center}
    .pagination button{background-color:var(--muted);color:var(--text);border:none;border-radius:6px;padding:8px 14px;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;min-width:40px;box-sizing:border-box}
    .pagination button.active{background-color:var(--accent)}
    .pagination button:hover{background-color:var(--accent)}
    #cartModal{position:fixed;left:50%;top:16%;transform:translateX(-50%) scale(0.95);background:var(--panel);padding:14px 18px;border-radius:10px;box-shadow:0 6px 30px rgba(0,0,0,0.6);opacity:0;pointer-events:none;transition:all 200ms ease;z-index:9999}
    #cartModal.show{opacity:1;transform:translateX(-50%) scale(1);pointer-events:auto}
    @media (max-width:1000px){ .catalog{grid-template-columns:repeat(2,1fr);} main{padding:20px} }
    @media (max-width:760px){
      .nav{display:none}
      .hamburger{display:inline-flex}
      main{flex-direction:column;padding:16px}
      .filters{width:100%;order:2}
      .catalog{grid-template-columns:1fr;order:1}
      .search{order:2;width:100%;max-width:none}
      #themeToggle{order:3}
    }
    @media (max-width:480px){
      .product-card img{height:160px}
      .buttons{flex-direction:column}
      .buttons button{width:100%}
    }
    button:focus, input:focus { outline: 3px solid rgba(255,102,0,0.18); outline-offset:2px; }
  </style>
</head>
<body>
  <header class="header" role="banner">
    <div class="header-left">
      <button class="hamburger" id="hamburger" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">‚ò∞</button>
      <a href="index.html" class="home-icon" title="–ì–ª–∞–≤–Ω–∞—è">üè†</a>
      <div class="logo">–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤</div>
    </div>
    <div class="search" role="search">
      <input id="globalSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Ç–æ–≤–∞—Ä–∞–º..." aria-label="–ü–æ–∏—Å–∫ –ø–æ —Ç–æ–≤–∞—Ä–∞–º" />
      <button id="searchBtn" title="–ò—Å–∫–∞—Ç—å">üîé</button>
    </div>
    <nav class="nav" role="navigation" aria-label="–ì–ª–∞–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
      <a href="catalog.html"><button class="active">–ö–∞—Ç–∞–ª–æ–≥</button></a>
      <a href="profile.html"><button>–ü—Ä–æ—Ñ–∏–ª—å</button></a>
      <a href="orders.html"><button>–ö–æ—Ä–∑–∏–Ω–∞</button></a>
      <a href="reviews.html"><button>–û—Ç–∑—ã–≤—ã</button></a>
      <a href="company.html"><button>–ö–æ–º–ø–∞–Ω–∏—è/–ì–∞—Ä–∞–Ω—Ç–∏–∏</button></a>
    </nav>
    <button id="themeToggle" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É" aria-pressed="false">üåì</button>
  </header>

  <main>
    <aside class="filters">
      <h3>–§–∏–ª—å—Ç—Ä—ã</h3>
      <div class="filter-group">
        <label for="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
        <select id="category">
          <option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
          <option value="mouse">–ú—ã—à–∏</option>
          <option value="keyboard">–ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã</option>
          <option value="monitor">–ú–æ–Ω–∏—Ç–æ—Ä—ã</option>
        </select>
      </div>
      <div class="filter-group">
        <label>–¶–µ–Ω–∞ (‚Ç∏)</label>
        <input type="range" id="priceRange" min="500" max="6000" step="100" value="6000" />
        <div class="price-value">–¥–æ <span id="priceValue">6000</span> ‚Ç∏</div>
      </div>
      <div class="filter-group">
        <label>–ë—Ä–µ–Ω–¥—ã</label>
        <label><input type="checkbox" value="Brand A" class="brand"> Brand A</label>
        <label><input type="checkbox" value="Brand B" class="brand"> Brand B</label>
        <label><input type="checkbox" value="Brand C" class="brand"> Brand C</label>
      </div>
      <div class="filter-group">
        <label>–†–µ–π—Ç–∏–Ω–≥</label>
        <label><input type="radio" name="rating" value="4"> 4‚òÖ –∏ –≤—ã—à–µ</label>
        <label><input type="radio" name="rating" value="3"> 3‚òÖ –∏ –≤—ã—à–µ</label>
        <label><input type="radio" name="rating" value="0" checked> –í—Å–µ</label>
      </div>
      <div class="filter-group">
        <label><input type="checkbox" id="inStock"> –í –Ω–∞–ª–∏—á–∏–∏</label>
      </div>
      <div class="filter-buttons">
        <button class="btn btn-apply" id="applyFilters">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
        <button class="btn btn-reset" id="resetFilters">–°–±—Ä–æ—Å</button>
      </div>
    </aside>

    <section class="catalog" id="catalog"></section>
  </main>

  <div id="cartModal">–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É ‚Äî <a href="orders.html" style="color:var(--accent);text-decoration:none">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É</a></div>

<script>
const PRODUCTS_KEY = 'catalogProducts';
const defaultProducts = [
  { id: 1, name: '–ò–≥—Ä–æ–≤–∞—è –º—ã—à—å GX100', category: 'mouse', brand: 'Brand A', price: 1490, rating: 4, stock: true, img: 'images/gx100_1.jpg', meta:{color:'—á—ë—Ä–Ω—ã–π'} },
  { id: 2, name: '–û—Ñ–∏—Å–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ KB200', category: 'keyboard', brand: 'Brand B', price: 2290, rating: 3, stock: true, img: 'images/keyboardkb200_1.jpg', meta:{} },
  { id: 3, name: '–ú–æ–Ω–∏—Ç–æ—Ä UltraView 24\"', category: 'monitor', brand: 'Brand C', price: 4990, rating: 4, stock: false, img: 'images/ultraw24_1.jpg', meta:{} },
  { id: 4, name: '–ú—ã—à—å Compact Lite', category: 'mouse', brand: 'Brand B', price: 990, rating: 3, stock: true, img: 'images/compactl1_1.jpg', meta:{} },
  { id: 5, name: '–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ Mechanical Pro', category: 'keyboard', brand: 'Brand C', price: 3590, rating: 4, stock: true, img: 'images/mechpro1.jpg', meta:{} },
  { id: 6, name: '–ú–æ–Ω–∏—Ç–æ—Ä Office 21\"', category: 'monitor', brand: 'Brand A', price: 2790, rating: 3, stock: true, img: 'images/monoffice1.jpg', meta:{} },
  { id: 7, name: '–ò–≥—Ä–æ–≤–∞—è –º—ã—à—å Neon RGB', category: 'mouse', brand: 'Brand C', price: 1990, rating: 4, stock: true, img: 'images/neonrgb1.jpg', meta:{} },
  { id: 8, name: '–ú–æ–Ω–∏—Ç–æ—Ä VisionX 27\"', category: 'monitor', brand: 'Brand B', price: 5790, rating: 4, stock: true, img: 'images/visionX_1.jpg', meta:{} },
  { id: 9, name: '–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ SlimBoard', category: 'keyboard', brand: 'Brand A', price: 1890, rating: 3, stock: true, img: 'images/SlimBoard.jpg', meta:{} }
];
let products = (function(){
  try {
    const raw = localStorage.getItem(PRODUCTS_KEY);
    if(raw) {
      const arr = JSON.parse(raw);
      if(Array.isArray(arr) && arr.length) return arr;
    }
  } catch(e){}
  return defaultProducts;
})();
const catalog = document.getElementById('catalog');
const priceRange = document.getElementById('priceRange');
const priceValue = document.getElementById('priceValue');
const categorySelect = document.getElementById('category');
const applyBtn = document.getElementById('applyFilters');
const resetBtn = document.getElementById('resetFilters');
const searchInput = document.getElementById('globalSearch') || document.getElementById('searchInput') || (function(){ const el=document.createElement('input'); el.id='searchInput'; return el; })();
let currentPage = 1;
const itemsPerPage = 6;
function formatPrice(n){
  return (n || 0).toLocaleString('ru-RU') + ' ‚Ç∏';
}
function starsHtml(r){
  const full = '‚òÖ'.repeat(Math.max(0, Math.min(5, Math.round(r))));
  const empty = '‚òÜ'.repeat(5 - Math.max(0, Math.min(5, Math.round(r))));
  return `<span class="stars">${full}${empty}</span>`;
}
function renderProducts(items, page = 1) {
  catalog.innerHTML = '';
  const start = (page - 1) * itemsPerPage;
  const paginatedItems = items.slice(start, start + itemsPerPage);
  if (paginatedItems.length === 0) {
    catalog.innerHTML = '<p style="color:var(--mutedText)">–ù–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∏–ª—å—Ç—Ä–∞–º</p>';
    return;
  }
  paginatedItems.forEach(p => {
    const card = document.createElement('div');
    card.className = 'product-card';
    card.dataset.id = p.id;
    const img = document.createElement('img');
    img.src = p.img || 'text=No+Image';
    img.alt = p.name;
    img.loading = 'lazy';
    card.appendChild(img);
    const h4 = document.createElement('h4');
    h4.textContent = p.name;
    card.appendChild(h4);
    const meta = document.createElement('div');
    meta.className = 'product-meta';
    const brand = document.createElement('div');
    brand.className = 'brand';
    brand.textContent = p.brand || '';
    meta.appendChild(brand);
    const ratingWrap = document.createElement('div');
    ratingWrap.className = 'rating';
    ratingWrap.innerHTML = starsHtml(p.rating) + `<span style="color:var(--mutedText);font-size:0.85rem;margin-left:6px">${p.rating}‚òÖ</span>`;
    meta.appendChild(ratingWrap);
    card.appendChild(meta);
    const price = document.createElement('p');
    price.className = 'price';
    price.textContent = formatPrice(p.price);
    card.appendChild(price);
    const btns = document.createElement('div');
    btns.className = 'buttons';
    const buy = document.createElement('button');
    buy.className = 'buy-btn';
    buy.type = 'button';
    buy.textContent = '–ö—É–ø–∏—Ç—å';
    btns.appendChild(buy);
    const cartBtn = document.createElement('button');
    cartBtn.className = 'cart-btn';
    cartBtn.type = 'button';
    cartBtn.textContent = '–í –∫–æ—Ä–∑–∏–Ω—É';
    btns.appendChild(cartBtn);
    const detailsBtn = document.createElement('button');
    detailsBtn.className = 'details-btn';
    detailsBtn.type = 'button';
    detailsBtn.textContent = '–û —Ç–æ–≤–∞—Ä–µ';
    detailsBtn.dataset.id = p.id;
    btns.appendChild(detailsBtn);
    card.appendChild(btns);
    catalog.appendChild(card);
  });
  renderPagination(items.length, page);
}
function renderPagination(totalItems, currentPageLocal) {
  const existing = catalog.querySelector('.pagination');
  if (existing) existing.remove();
  const totalPages = Math.max(1, Math.ceil(totalItems / itemsPerPage));
  if (totalPages <= 1) return;
  const pagination = document.createElement('div');
  pagination.className = 'pagination';
  for (let i = 1; i <= totalPages; i++) {
    const btn = document.createElement('button');
    btn.textContent = i;
    if (i === currentPageLocal) btn.classList.add('active');
    btn.addEventListener('click', () => {
      currentPage = i;
      applyFilters();
      window.scrollTo({ top: 200, behavior: 'smooth' });
    });
    pagination.appendChild(btn);
  }
  catalog.appendChild(pagination);
}
function applyFilters() {
  const selectedCategory = categorySelect.value;
  const maxPrice = parseInt(priceRange.value);
  const selectedBrands = Array.from(document.querySelectorAll('.brand:checked')).map(b => b.value);
  const selectedRating = parseInt(document.querySelector('input[name="rating"]:checked').value);
  const inStock = document.getElementById('inStock').checked;
  const searchQuery = (searchInput.value || '').toLowerCase();
  const filtered = products.filter(p => {
    const matchesCategory = selectedCategory === 'all' || p.category === selectedCategory;
    const matchesPrice = p.price <= maxPrice;
    const matchesBrand = selectedBrands.length === 0 || selectedBrands.includes(p.brand);
    const matchesRating = p.rating >= selectedRating;
    const matchesStock = !inStock || p.stock;
    const matchesSearch = (p.name + ' ' + (p.brand||'') + ' ' + (p.category||'')).toLowerCase().includes(searchQuery);
    return matchesCategory && matchesPrice && matchesBrand && matchesRating && matchesStock && matchesSearch;
  });
  renderProducts(filtered, currentPage);
}
priceRange.addEventListener('input', () => {
  priceValue.textContent = priceRange.value;
});
applyBtn.addEventListener('click', () => {
  currentPage = 1;
  applyFilters();
});
resetBtn.addEventListener('click', () => {
  document.querySelectorAll('.filters input, .filters select').forEach(el => {
    if (el.type === 'checkbox' || el.type === 'radio') el.checked = false;
    if (el.tagName.toLowerCase() === 'select') el.value = 'all';
    if (el.type === 'range') el.value = 6000;
  });
  document.querySelector('input[name="rating"][value="0"]').checked = true;
  priceValue.textContent = 6000;
  if (searchInput) searchInput.value = '';
  currentPage = 1;
  applyFilters();
});
if(searchInput){
  searchInput.addEventListener('input', () => {
    currentPage = 1;
    applyFilters();
  });
}
(function(){
  const CART_KEY = 'shopCart';
  function loadCart(){ try{ return JSON.parse(localStorage.getItem(CART_KEY) || '[]'); }catch(e){ return []; } }
  function saveCart(c){ localStorage.setItem(CART_KEY, JSON.stringify(c)); window.dispatchEvent(new Event('storage')); }
  function addToCart(product, qty = 1){
    const cart = loadCart();
    const idx = cart.findIndex(i => i.id === product.id);
    if (idx > -1) cart[idx].qty = (cart[idx].qty || 0) + qty;
    else cart.push({ id: product.id, name: product.name, price: product.price, img: product.img || '', qty: qty, brand: product.brand || '' });
    saveCart(cart);
    showModal();
  }
  function showModal(){
    const modal = document.getElementById('cartModal');
    modal.classList.add('show');
    clearTimeout(window._catalogCartModalTimer);
    window._catalogCartModalTimer = setTimeout(()=> modal.classList.remove('show'), 1600);
  }
  document.getElementById('catalog').addEventListener('click', (e) => {
    const btn = e.target.closest('button');
    if(!btn) return;
    const card = btn.closest('.product-card');
    if(!card) return;
    const id = Number(card.dataset.id || btn.dataset.id);
    const p = products.find(x => x.id === id);
    if(!p) return;
    if (btn.classList.contains('cart-btn')) {
      addToCart(p, 1);
    } else if (btn.classList.contains('buy-btn')) {
      addToCart(p, 1);
      setTimeout(()=> location.href = 'orders.html', 300);
    } else if (btn.classList.contains('details-btn')) {
      location.href = `product${id}.html`;
    }
  });
  window.addToCart = addToCart;
})();
window.addEventListener('storage', (e)=> {
  if(e.key === PRODUCTS_KEY || e.key === null){
    try {
      const raw = localStorage.getItem(PRODUCTS_KEY);
      if(raw) products = JSON.parse(raw);
      else products = defaultProducts;
    } catch(err) { products = defaultProducts; }
    applyFilters();
  }
});
renderProducts(products);
(function prefillAndApply(){
  try{
    const params = new URLSearchParams(location.search);
    const q = params.get('q') || params.get('search') || '';
    if(q && searchInput){
      searchInput.value = q;
      currentPage = 1;
      applyFilters();
    }
  }catch(e){}
})();
</script>

<script>
(function(){
  const hamb = document.getElementById('hamburger');
  const nav = document.querySelector('.nav');
  if(hamb && nav){
    const panel = document.createElement('div');
    panel.id = 'mobileNavPanel';
    Object.assign(panel.style,{
      position:'fixed', top:'0', right:'0', height:'100vh', width:'80%', maxWidth:'360px',
      background: getComputedStyle(document.documentElement).getPropertyValue('--panel') || 'var(--panel)',
      boxShadow:'-10px 0 30px rgba(0,0,0,0.4)', transform:'translateX(100%)',
      transition:'transform .22s ease', zIndex:9999, padding:'20px', overflowY:'auto'
    });
    panel.innerHTML = `<div style="display:flex;flex-direction:column;gap:10px">${nav.innerHTML}</div><div style="height:20px"></div><button id="mobileClose" style="width:100%;padding:12px;border-radius:10px;border:none;background:var(--muted);color:var(--text);">–ó–∞–∫—Ä—ã—Ç—å</button>`;
    document.body.appendChild(panel);
    function open(){ panel.style.transform='translateX(0)'; document.body.style.overflow='hidden'; }
    function close(){ panel.style.transform='translateX(100%)'; document.body.style.overflow=''; }
    hamb.addEventListener('click', open);
    panel.querySelector('#mobileClose').addEventListener('click', close);
    window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') close(); });
  }
  const THEME_KEY = 'siteTheme';
  const themeBtn = document.getElementById('themeToggle');
  const globalSearch = document.getElementById('globalSearch');
  const searchBtn = document.getElementById('searchBtn');
  function updateThemeButton(){
    if(!themeBtn) return;
    const isLight = document.body.classList.contains('light');
    themeBtn.textContent = isLight ? 'üåû' : 'üåô';
    themeBtn.setAttribute('aria-pressed', String(isLight));
  }
  function initTheme(){
    const t = localStorage.getItem(THEME_KEY) || 'dark';
    document.body.classList.toggle('light', t === 'light');
    updateThemeButton();
  }
  function toggleTheme(){
    const newVal = document.body.classList.contains('light') ? 'dark' : 'light';
    document.body.classList.toggle('light');
    localStorage.setItem(THEME_KEY, newVal);
    updateThemeButton();
  }
  function buildCatalogUrl(q){
    const url = new URL('catalog.html', location.href);
    if(q && q.trim()) url.searchParams.set('q', q.trim());
    return url.toString();
  }
  function runSearchAndNavigate(q){
    location.href = buildCatalogUrl(q);
  }
  function globalSearchHandler(e){
    if(e instanceof KeyboardEvent && e.key !== 'Enter') return;
    const q = (globalSearch && globalSearch.value || '').trim();
    runSearchAndNavigate(q);
  }
  if(themeBtn) themeBtn.addEventListener('click', toggleTheme);
  if(globalSearch) globalSearch.addEventListener('keydown', globalSearchHandler);
  if(searchBtn) searchBtn.addEventListener('click', globalSearchHandler);
  initTheme();
})();
</script>
</body>
</html>
